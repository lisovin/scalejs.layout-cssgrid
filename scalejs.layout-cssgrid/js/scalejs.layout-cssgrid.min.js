define("scalejs.layout-cssgrid/utils.base",[],function(){function e(e){return void 0!==e}function t(e,t){var r=!1,n=typeof t,a=typeof e;try{r=e instanceof t}catch(i){r="string"===n&&a===t}return r}function r(e){return function(){return e.apply(null,arguments)}}function n(e,t,r){if(void 0===e||null===e)return[];var n,a,i=[];for(n=e.length;n--;i[n]=e[n]);return a=Array.prototype.slice.call(i,t,r)}return String.prototype.contains=function(e){return-1!==this.indexOf(e)},{is:t,defined:e,toArray:n,createBoundedWrapper:r}}),define("scalejs.layout-cssgrid/utils.sheetLoader",["./utils.base","cssParser","domReady"],function(e,t){function r(e,n,a){n.hasOwnProperty(e)||(n[e]=null,require(["text!"+e],function(i){var s=t.parse(i);n[e]=s,(s.imports||[]).forEach(function(e){r(e["import"],n,a)}),a()}))}function n(e){var t={};a(document.styleSheets).forEach(function(n){n.href&&r(n.href,t,function(){var r;for(r in t)if(t.hasOwnProperty(r)&&null===t[r])return;e(t)})})}var a=e.toArray;return{loadAllStyleSheets:n}}),define("scalejs.layout-cssgrid/consts",[],function(){return{GRIDLAYOUT:"css-grid-layout",STRING:"string",PROPERTY:"property",MOZ:"-moz-",MS:"-ms-",OPERA:"-o-",WEBKIT:"-webkit-",SPACE:" ",PERIOD:".",COLON:":",SEMICOL:";",OPEN_CURLY:"{",CLOSE_CURLY:"}",HYPHEN:"-",EMPTY:"",AUTO:"auto",NONE:"none",DISPLAY:"display",POSITION:"position",RELATIVE:"relative",STATIC:"static",ABSOLUTE:"absolute",WIDTH:"width",HEIGHT:"height",PADDING:"padding",MARGIN:"margin",BORDER:"border",STYLE:"-style",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",MIN:"min-",MAX:"max-",PX:"px",EM:"em",PERCENT:"%",REM:"rem",FR:"fr",CONTENTBOX:"content-box",PADDINGBOX:"padding-box",STRETCH:"stretch",GRID:"grid",INLINEGRID:"inline-grid",GRIDCOLUMNS:"grid-columns",GRIDCOLUMN:"grid-column",GRIDCOLUMNSPAN:"grid-column-span",GRIDCOLUMNALIGN:"grid-column-align",GRIDROWS:"grid-rows",GRIDROW:"grid-row",GRIDROWSPAN:"grid-row-span",GRIDROWALIGN:"grid-row-align",BOXSIZING:"box-sizing",BLOCKPROGRESSION:"block-progression",precision:0,agentTruncatesLayoutLengths:!0,regexSpaces:/\s+/}}),define("scalejs.layout-cssgrid/enums",["./consts"],function(e){var t=e.EMPTY,r=e.STATIC,n={minWidth:{},maxWidth:{},minHeight:{},maxHeight:{},shrinkToFit:{}},a={auto:{keyword:e.AUTO},minContent:{keyword:"min-content"},maxContent:{keyword:"max-content"},fitContent:{keyword:"fit-content"},minmax:{keyword:"minmax"},parse:function(e){switch(e){case a.auto.keyword:return a.auto;case a.minContent.keyword:return a.minContent;case a.maxContent.keyword:return a.maxContent;case a.fitContent.keyword:return a.fitContent;case a.minmax.keyword:return a.minmax;default:throw new Error("unknown grid track string: "+e)}}},i={stretch:{keyword:e.STRETCH},start:{keyword:"start"},end:{keyword:"end"},center:{keyword:"center"},parse:function(e){switch(e){case i.start.keyword:return i.start;case i.end.keyword:return i.end;case i.center.keyword:return i.center;case i.stretch.keyword:case null:case t:return i.stretch;default:throw new Error("unknown grid align string: "+e)}}},s={"static":{keyword:e.STATIC},relative:{keyword:e.RELATIVE},absolute:{keyword:e.ABSOLUTE},fixed:{keyword:"fixed"},parse:function(e){switch(e){case s.relative.keyword:return s.relative;case s.absolute.keyword:return s.absolute;case s.fixed.keyword:return s.fixed;case s[r].keyword:case null:case t:return s[r];default:throw new Error("unknown position string: "+e)}}},o={tb:{keyword:"tb"},bt:{keyword:"bt"},lr:{keyword:"lr"},rl:{keyword:"rl"},parse:function(e){switch(e){case o.tb.keyword:case null:case t:return o.tb;case o.bt.keyword:return o.bt;case o.lr.keyword:return o.lr;case o.rl.keyword:return o.rl;default:throw new Error("unknown block-progression string: "+e)}}},u={thin:0,medium:0,thick:0},l={valueAndUnit:{},keyword:{}};return{calculatorOperation:n,gridTrackValue:a,gridAlign:i,position:s,blockProgression:o,borderWidths:u,sizingType:l}}),define("scalejs.layout-cssgrid/objects",["./enums"],function(e){function t(){return{number:null,size:null,sizingType:null,items:[],measure:null,minMeasure:null,maxMeasure:null,contentSizedTrack:!1,implicit:!1}}function r(){return{firstNumber:null,span:null,size:e.gridTrackValue.auto,sizingType:e.sizingType.keyword,items:[],measure:null}}function n(){return{width:null,height:null}}function a(){return{value:null,unit:null}}function i(){return{itemElement:null,styles:null,position:null,column:1,columnSpan:1,columnAlign:e.gridAlign.stretch,row:1,rowSpan:1,rowAlign:e.gridAlign.stretch,usedWidthMeasure:null,maxWidthMeasure:null,maxHeightMeasure:null,shrinkToFitSize:null,verified:{columnBreadth:!1,rowBreadth:!1,columnPosition:!1,rowPosition:!1}}}return{track:t,implicitTrackRange:r,item:i,widthAndHeight:n,cssValueAndUnit:a}}),define("scalejs.layout-cssgrid/utils.css",["./consts","./utils.base"],function(e,t){function r(e){return E(e,y)?e.toLowerCase():e}function n(e){var t=/(-[a-z])/g,n=function(e){return e.toUpperCase().replace(p,h)};return E(e,y)?r(e).replace(t,n):e}function a(){var e=(new Date).getTime();return e+=Math.floor(Math.random()*e),w+p+e}function i(e){return new RegExp(e)}function s(e){return i("(\\s|^)"+e+"(\\s|$)")}function o(e,t,r){return r=r||s(t),e.className.match(r)}function u(e,t,r){r=r||s(t),o(e,t,r)||(e.className+=M+t)}function l(e,t){var r;for(r in t)if(t[r]===e)return!0;return!1}function c(e,t){var r=S.cloneNode(!0);return e=e||b,r.setAttribute(T,e),t=t||"temp-"+Math.round(2*Math.random()+1),r.setAttribute("id",t),R.appendChild(r),r}function d(e,t){var r,n;if(t=t?"-"+t:"",e=e||b,r=w+p+e+t,n=document.getElementById(r))for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function m(e,t,r){t=t||b,r=r?"-"+r:"";var n,a=w+p+t+r;return l(t+r,x)?n=document.getElementById(a):(n=c(t,a),x.push(t+r)),null!==n&&g(n,e),n}function f(e,t){var r=window.getComputedStyle;return e.currentStyle?e.currentStyle[n(t)]:r?r(e,null).getPropertyValue(t):!1}var g,p=e.HYPHEN,h=e.EMPTY,y=e.STRING,w=e.GRIDLAYOUT,M=e.SPACE,b="all",T="media",v=e.TYPE,k=t.defined,E=t.is,R=document.getElementsByTagName("head")[0],S=document.createElement("style"),x=[];return S.setAttribute(v,"text/css"),g=k(S.styleSheet)?function(e,t){e.styleSheet.cssText+=t}:function(e,t){e.appendChild(document.createTextNode(t))},{makeUniqueClass:a,getCssValue:f,addClass:u,embedCss:m,clearEmbeddedCss:d}}),define("scalejs.layout-cssgrid/utils",["./utils.base","./utils.css"],function(e,t){return{is:e.is,defined:e.defined,createBoundedWrapper:e.createBoundedWrapper,makeUniqueClass:t.makeUniqueClass,getCssValue:t.getCssValue,addClass:t.addClass,embedCss:t.embedCss,clearEmbeddedCss:t.clearEmbeddedCss}}),define("scalejs.layout-cssgrid/layoutMeasure",["./consts","./enums","./utils"],function(e,t,r){function n(e){function t(){return d}function r(){return d/Math.pow(10,c)}function a(){var e,t=Math.abs,r=Math.pow,a=t(d%r(10,c));return e=a>=5*r(10,c-1)?r(10,c)-a:-a,0>d&&(e=-e),n(d+e)}function i(e){if("function"!=typeof e.getRawMeasure)throw new Error("LayoutMeasure.add only accepts layout measures");return n(d+e.getRawMeasure())}function s(e){if("function"!=typeof e.getRawMeasure)throw new Error("LayoutMeasure.subtract only accepts layout measures");return n(d-e.getRawMeasure())}function o(e){if("number"!=typeof e)throw new Error("LayoutMeasure.multiply only accepts numbers");return n(Math.floor(d*e))}function u(e){if("number"!=typeof e)throw new Error("LayoutMeasure.divide only accepts number");return n(Math.floor(d/e))}function l(e){if("function"!=typeof e.getRawMeasure)throw new Error("LayoutMeasure.equals only accepts layout measures");return d===e.getRawMeasure()}var d;if(0!==e%1)throw new Error("LayoutMeasures must be integers, measure was "+typeof e+"("+e+")");return d=e,{getRawMeasure:t,getPixelValue:r,getMeasureRoundedToWholePixel:a,add:i,subtract:s,multiply:o,divide:u,equals:l}}function a(e){return n(Math.round(e*Math.pow(10,c)))}function i(){return n(0)}function s(e,t){return n(Math.min(e.getRawMeasure(),t.getRawMeasure()))}function o(e,t){return n(Math.max(e.getRawMeasure(),t.getRawMeasure()))}function u(e){var t=e.length,r=0,a=0,i=e.indexOf(d);if(e=e.substr(0,e.length-2),i>=0){for(a=e.substring(i+1);a.length<c;)a+=k;a=parseInt(a,10)}return 0!==i&&(r=e.substring(0,i>=0?i:t),r=parseInt(r,10)*Math.pow(10,c)),n(r)}function l(e,t){var r,n,a,i,s,o=R(e,t),l=!1;if(!o.contains(m)){if(t.contains("border-width"))if(r=R(e,"border-style"),r===v)o="0"+m,l=!0;else for(n in E)if(E.hasOwnProperty(n)&&r===n){o=E[n]+m,l=!0;break}l||(a=o.contains(f),i=o.contains(g),s=o.contains(p),a||i?(r=parseInt(R(a?e:document.body,"font-size"),10),o=parseInt(o,10)*r+m):s&&(t.contains(y)||t.contains(w)||t.contains(M)?n=e.parentNode.clientWidth:(t.contains(h)||t.contains(b)||t.contains(T))&&(n=e.parentNode.clientHeight),o=Math.round(parseInt(o,10)/100*n)+m))}return u(o)}var c=e.precision,d=e.PERIOD,m=e.PX,f=e.EM,g=e.REM,p=e.PERCENT,h=e.HEIGHT,y=e.WIDTH,w=e.LEFT,M=e.RIGHT,b=e.TOP,T=e.BOTTOM,v=e.NONE,k="0",E=t.borderWidths,R=r.getCssValue;return{create:n,measureFromPx:a,measureFromStyleProperty:l,zero:i,min:s,max:o}}),define("scalejs.layout-cssgrid/trackManager",["./consts","./enums","./objects"],function(e,t,r){var n=e.FR,a=t.sizingType,i=t.gridTrackValue,s=r.track,o=r.implicitTrackRange;return function(){function e(){function e(){r=!0,n=0,a=0}function t(){var e=null,t=!1,r=h.length,i=y.length;return n>=r?t=!0:i>a&&y[a].firstNumber<h[n].number&&(t=!0),t&&i>a?(e=y[a],a+=1):r>n&&(e=h[n],n+=1),e}var r=!0,n=0,a=0;return{reset:e,next:t}}function t(e){h.push(e)}function r(e){return e.firstNumber+e.span-1}function u(e){var t,n,a,i,s,o,u=0,l=y.length;for(u=0;l>u;u+=1)if(t=y[u],o=r(t),e>=t.firstNumber&&o>=e){if(n=l-1>u?null:y[u+1],e===t.firstNumber)1===t.span?y.splice(u,1):(t.firstNumber+=1,t.span-=1);else{if(e!==o)throw a=t.firstNumber,i=e-t.firstNumber,s=e+1,new Error("Not implemented");t.span-=1}break}}function l(e){u(e);var r=0,n=h.length,o=s();if(o.number=e,o.sizingType=a.keyword,o.size=i.auto,o.implicit=!0,0===n||e>h[n-1].number)t(o);else if(e!==h[n-1].number)for(r=0;n>r&&e!==h[r].number;r+=1)if(e<h[r].number){h.splice(r,0,o);break}}function c(e,t){var n,a,i,s,u,c,d,m,f,g,p,w,M,b,T,v,k,E,R,S,x,N,C=h.length,P=Math.min,I=Math.max;if(l(e),e+=1,t>=e){for(n=[],a=e,i=t,0===C&&n.push({first:a,last:i}),s=0;C>s&&!(a>i||h[s].number>i);s+=1)h[s].number>=a&&h[s].number<=i&&(a===h[s].number?a+=1:i===h[s].number?i-=1:(n.push({first:a,last:h[s].number-1}),a=h[s].number+1));for(i>=a&&n.push({first:a,last:i}),u=0,d=n.length,c=0;d>c;c+=1){for(f=n[c],g=f.first,p=f.last,w=!0,m=y.length,u=0;m>u&&(M=y[u],b=M.firstNumber,T=r(M),!(b>p));u+=1)if(T>=g){if(g===b&&p===T){w=!1;break}v=P(g,b),k=I(g,b)-v,E=v+k,R=P(p,T)-E,S=E+R,x=I(p,T)-S+1,k>0&&(N=o(),N.firstNumber=v,N.span=k,y.splice(u,0,N),u+=1),R>0&&(N=o(),N.firstNumber=E,N.span=R,y.splice(u,0,N),u+=1),x>0&&(N=o(),N.firstNumber=S,N.span=x,y.splice(u,0,N),u+=1),y.splice(u,1),w=!1;break}w&&(N=o(),N.firstNumber=g,N.span=p-g+1,u>=y.length?y.push(N):y.splice(u,0,N))}}}function d(){return e()}function m(e){var t,r,n;for(r=h.length-1;r>=0&&!(h[r].number<e);r-=1)if(e===h[r].number)return h[r];for(r=y.length,t=0;r>t;t+=1)if(n=y[t].firstNumber+y[t].span-1,e>=y[t].firstNumber&&n>=e)return y[t]}function f(e,t){var r,n,a,i,s=[];for(n=0,a=h.length;a>n&&(r=h[n].number,!(r>t));n+=1)r>=e&&t>=r&&s.push(h[n]);for(n=0,a=y.length;a>n&&(i=y[n].firstNumber+y[n].span-1,e>=y[n].firstNumber&&i>=t&&s.push(y[n]),!(i>=t));n+=1);return 0===s.length&&console.log("getTracks: a track in the range "+e+" - "+t+" doesn't exist"),s}function g(e){return e.sizingType===a.valueAndUnit&&e.size.unit===n}function p(e,t){var r,n;for(r=e-1,n=h.length;n>r&&e+t-1>r;r+=1)if(g(h[r]))return!0;return!1}var h=[],y=[];return{tracks:h,addTrack:t,ensureTracksExist:c,getIterator:d,getTrack:m,getTracks:f,spanIsInFractionalTrack:p}}}),define("scalejs.layout-cssgrid/propertyParser",["./consts","./enums","./objects"],function(e,t,r){function n(e){var t=!1;switch(e){case p.auto.keyword:case p.minContent.keyword:case p.maxContent.keyword:case p.fitContent.keyword:t=!0}return t}function a(e){var t=/^(\d*\.?\d*)([\w\W]*)/,r=e.match(t),n=w();return r[0].length>0&&r[1].length>0&&r[2].length>0&&(n.value=r[1].indexOf(l)<0?parseInt(r[1],10):parseFloat(r[1],10),n.unit=r[2]),n}function i(e){var t=!1;switch(e){case c:case d:case"pt":case"pc":case"in":case"cm":case"mm":case m:case"ex":case"vh":case"vw":case"vm":case"ch":case f:case g:t=!0}return t}function s(e,t){var r,s,l,c=e.split(o),d=c.length;if(1!==d||0!==c[0].length&&c[0].toLowerCase()!==u)for(r=0;d>r;r+=1)if(c[r]=c[r].toLowerCase(),s=null,n(c[r]))s=y(),s.number=r+1,s.size=p.parse(c[r]),s.sizingType=h.keyword,t.addTrack(s);else{if(l=a(c[r]),null===l.value||null===l.unit)throw new Error("Not a keyword or a valid CSS value; track "+(r+1)+" = "+c[r]+'. Invalid track definition "'+c[r]+'"');if(!i(l.unit))throw new Error('Invalid track unit "'+l.unit+'"');s=y(),s.number=r+1,s.size=l,s.sizingType=h.valueAndUnit,t.addTrack(s)}}var o=e.regexSpaces,u=e.NONE,l=e.PERIOD,c=e.PX,d=e.PERCENT,m=e.EM,f=e.REM,g=e.FR,p=t.gridTrackValue,h=t.sizingType,y=r.track,w=r.cssValueAndUnit;return{parseGridTracksString:s}}),define("scalejs.layout-cssgrid/boxSizeCalculator",["./consts","./utils","./layoutMeasure"],function(e,t,r){function n(e){var t=v(e,o),n=r.measureFromStyleProperty(e,u);return n=n.add(r.measureFromStyleProperty(e,m+p+h)).add(r.measureFromStyleProperty(e,m+p+y)),t===w&&(n=n.add(r.measureFromStyleProperty(e,f+p+h)).add(r.measureFromStyleProperty(e,f+p+y))),(t===w||t===M)&&(v(e,g+p+h+b)!==T&&(n=n.add(r.measureFromStyleProperty(e,g+p+h+p+u))),v(e,g+p+y+b)!==T&&(n=n.add(r.measureFromStyleProperty(e,g+p+y+p+u)))),n}function a(e){var t=v(e,o),n=r.measureFromStyleProperty(e,l);return n=n.add(r.measureFromStyleProperty(e,m+p+c)).add(r.measureFromStyleProperty(e,m+p+d)),t===w&&(n=n.add(r.measureFromStyleProperty(e,f+p+c)).add(r.measureFromStyleProperty(e,f+p+d))),(t===w||t===M)&&(v(e,g+p+c+b)!==T&&(n=n.add(r.measureFromStyleProperty(e,g+p+c+p+u))),v(e,g+p+d+b)!==T&&(n=n.add(r.measureFromStyleProperty(e,g+p+d+p+u)))),n}function i(e,t){var n=v(e,o),a=t;return n===w&&(a=a.subtract(r.measureFromStyleProperty(e,f+p+h).add(r.measureFromStyleProperty(e,f+p+y)))),(n===w||n===M)&&(v(e,g+p+h+b)!==T&&(a=a.subtract(r.measureFromStyleProperty(e,g+p+h+p+u))),v(e,g+p+y+b)!==T&&(a=a.subtract(r.measureFromStyleProperty(e,g+p+y+p+u)))),a=a.subtract(r.measureFromStyleProperty(e,m+p+h).add(r.measureFromStyleProperty(e,m+p+y)))}function s(e,t){var n,a=v(e,o),i=t;return a===w&&(i=i.subtract(r.measureFromStyleProperty(e,f+p+c).add(r.measureFromStyleProperty(e,f+p+d)))),(a===w||a===M)&&(v(e,g+p+c+b)!==T&&(i=i.subtract(r.measureFromStyleProperty(e,g+p+c+p+u))),v(e,g+p+d+b)!==T&&(i=i.subtract(r.measureFromStyleProperty(e,g+p+d+p+u)))),i=i.subtract(r.measureFromStyleProperty(n,m+p+c).add(r.measureFromStyleProperty(n,m+p+d)))}var o=e.BOXSIZING,u=e.WIDTH,l=e.HEIGHT,c=e.TOP,d=e.BOTTOM,m=e.MARGIN,f=e.PADDING,g=e.BORDER,p=e.HYPHEN,h=e.LEFT,y=e.RIGHT,w=e.CONTENTBOX,M=e.PADDINGBOX,b=e.STYLE,T=e.NONE,v=t.getCssValue;return{calcMarginBoxWidth:n,calcMarginBoxHeight:a,calcBoxWidthFromMarginBoxWidth:i,calcBoxHeightFromMarginBoxHeight:s}}),define("scalejs.layout-cssgrid/intrinsicSizeCalculator",["./consts","./enums","./objects","./utils","./boxSizeCalculator"],function(e,t,r,n,a){function i(e,t,r,n){null===P&&(P=C.cloneNode(!0),P.id="intrinsicSizeCalculator");var a=f,i=e.parentNode,s="font-",o=s+"family",u=s+"size",l=u+"-adjust",c=s+g,d=s+"style",m=s+"variant",T=s+"weight",v="direction";if(R(r)&&null!==r)a+=p+y+r.getPixelValue()+w+M;else switch(t){case t.minWidth:case t.maxHeight:a+=p+y+x.cssText+M;break;case t.minHeight:case t.maxWidth:a+=p+y+N.cssText+M;break;case t.shrinkToFit:}if(R(n)&&null!==n)a+=h+y+n.getPixelValue()+w+M;else switch(t){case t.minWidth:case t.maxHeight:a+=h+y+N.cssText+M;break;case t.minHeight:case t.maxWidth:a+=h+y+x.cssText+M;break;case t.shrinkToFit:}I=i===document.body?i:i.parentNode,I!==i&&(a+=o+y+S(i,o)+M+u+y+S(i,u)+M+l+y+S(i,l)+M+c+y+S(i,c)+M+d+y+S(i,d)+M+m+y+S(i,m)+M+T+y+S(i,T)+M+v+y+S(i,v)+M+b+y+S(i,b)+M),P.style.cssText+=a,I.appendChild(P)}function s(){I.removeChild(P)}function o(e){var t=e.cloneNode(!0);return t.style.cssText=t.style.cssText+M+"float:left",P.appendChild(t),t}function u(e){i(e,k.minWidth);var t=o(e),r=a.calcMarginBoxWidth(t);return P.removeChild(t),s(),r}function l(e){i(e,k.maxWidth);var t=o(e),r=a.calcMarginBoxWidth(t);return P.removeChild(t),s(),r}function c(e,t){if(!R(t)||null===t)throw new Error("No `usedWidth` specified.");i(e,k.minHeight,t);var r=o(e),n=a.calcMarginBoxHeight(r);return P.removeChild(r),s(),n}function d(e,t){if(!R(t)||null===t)throw new Error("No `usedWidth` specified");i(e,k.maxHeight,t);var r=o(e),n=a.calcMarginBoxHeight(r);return P.removeChild(r),s(),n}function m(e,t,r,n,u){null!==n&&(t=n),null!==u&&(r=u),i(e,k.shrinkToFit,t,r);var l,c,d=o(e),m=E();return null!==n&&(l=a.calcBoxWidthFromMarginBoxWidth(d,n),d.style.cssText+=T+p+y+l.getPixelValueString()+w+M+v+p+y+l.getPixelValueString()+w+M),null!==u&&(c=a.calcBoxHeightFromMarginBoxHeight(d,u),d.style.cssText+=T+h+y+c.getPixelValueString()+w+M+v+h+y+c.getPixelValueString()+w+M),m.width=a.calcMarginBoxWidth(d),m.height=a.calcMarginBoxHeight(d),P.removeChild(d),s(),m}var f=e.EMPTY,g=e.STRETCH,p=e.WIDTH,h=e.HEIGHT,y=e.COLON,w=e.PX,M=e.SEMICOL,b=e.BLOCKPROGRESSION,T=e.MIN,v=e.MAX,k=t.calculatorOperation,E=r.widthAndHeight,R=n.defined,S=n.getCssValue,x={cssText:"0px"},N={cssText:"1000000px"},C=document.createElement("div"),P=null,I=null;return{calcMinWidth:u,calcMaxWidth:l,calcMinHeight:c,calcMaxHeight:d,calcShrinkToFitWidthAndHeight:m}}),define("scalejs.layout-cssgrid/gridLayout",["./consts","./enums","./objects","./utils","./layoutMeasure","./trackManager","./propertyParser","./boxSizeCalculator","./intrinsicSizeCalculator"],function(e,t,r,n,a,i,s,o,u){var l=e.BLOCKPROGRESSION,c=e.EMPTY,d=e.OPEN_CURLY,m=e.ABSOLUTE,f=e.CLOSE_CURLY,g=e.RELATIVE,p=e.STATIC,h=e.PERIOD,y=e.GRIDLAYOUT,w=e.GRIDCOLUMNS,M=e.GRIDROWS,b=e.GRIDCOLUMN,T=e.GRIDCOLUMNSPAN,v=e.GRIDROW,k=e.GRIDROWSPAN,E=e.GRIDROWALIGN,R=e.GRIDCOLUMNALIGN,S=e.NONE,x=e.TOP,N=e.RIGHT,C=e.BOTTOM,P=e.LEFT,I=e.INLINEGRID,O=e.MARGIN,z=e.HYPHEN,F=e.PADDING,A=e.BORDER,L=e.WIDTH,W=e.HEIGHT,H=e.AUTO,G=e.PX,B=e.FR,D=e.DISPLAY,U=e.COLON,j=e.SEMICOL,V=e.STYLE,Y=e.BOXSIZING,X=e.MIN,q=e.MAX,K=e.POSITION,Z=e.STRETCH,_=e.precision,$=t.blockProgression,J=t.position,Q=t.gridAlign,et=t.sizingType,tt=t.borderWidths,rt=$.parse,nt=J.parse,at=Q.parse,it=t.gridTrackValue,st=r.widthAndHeight,ot=r.item,ut=n.getCssValue,lt=n.createBoundedWrapper,ct=n.defined,dt=n.makeUniqueClass,mt=n.addClass,ft=n.embedCss,gt=n.clearEmbeddedCss,pt=document.createElement("div");return function(e,t,r,n,ht){function yt(e,t,r,n){var i=Yt.parentNode,s=e===L?P:x,o=e===L?N:C,u=e===L?i.offsetWidth:i.offsetHeight,l=a.measureFromStyleProperty(i,A+z+s+z+L),c=a.measureFromStyleProperty(i,A+z+o+z+L),d=a.measureFromStyleProperty(i,F+z+s),m=a.measureFromStyleProperty(i,F+z+o);return u-=l.getRawMeasure()+c.getRawMeasure()+d.getRawMeasure()+m.getRawMeasure()+t[s].getRawMeasure()+t[o].getRawMeasure()+n[s].getRawMeasure()+n[o].getRawMeasure()+r[s].getRawMeasure()+r[o].getRawMeasure()}function wt(){return window.innerWidth-document.documentElement.clientWidth}function Mt(){return window.innerHeight-document.documentElement.clientHeight}function bt(){return Xt===$.lr||Xt===$.rl}function Tt(){var e,t,n,i,s,o,u,l,c,d,m,f,g,p,h,y,w=Yt.cloneNode(!1),M=r,b=Yt.parentNode,T="0px",v=[x,N,C,P],k={},E={},R={},S=Yt.style.display;e=M.display===I?!0:!1,v.forEach(function(e){k[e]=a.measureFromStyleProperty(Yt,O+z+e),E[e]=a.measureFromStyleProperty(Yt,F+z+e),R[e]=a.measureFromStyleProperty(Yt,A+z+e+z+L)}),b.insertBefore(w,Yt),Yt.style.display="none",t=ut(w,L),i=ut(Yt,"float"),t===T&&(t=H),t!==H||!e&&i!==P&&i!==N||(Jt=!0),n=ut(w,W),n===T&&(n=H),n===H&&(Qt=!0),Yt.style.display=S,b.removeChild(w),w=document.createElement(Yt.tagName),s=t!==H?t:yt(L,k,E,R)+G,o=n!==H?n:yt(W,k,E,R)+G,u=D+U+(e?"inline-block":"block")+j+O+U+ut(Yt,O)+j+A+z+L+U+ut(Yt,A+z+L)+j+F+U+ut(Yt,F)+j+A+V+U+ut(Yt,A+V)+j+L+U+s+j+W+U+o+j+Y+U+ut(Yt,Y)+j+X+L+U+ut(Yt,X+L)+j+X+W+U+ut(Yt,X+W)+j+q+L+U+ut(Yt,q+L)+j+q+W+U+ut(Yt,q+W)+j,w.style.cssText=u,l=wt(),c=Mt(),b.insertBefore(w,Yt),d=b.removeChild(Yt),m=t!==H?0:l-wt(),f=n!==H?0:c-Mt(),g=a.measureFromStyleProperty(w,L),p=a.measureFromStyleProperty(w,W),h=a.measureFromPx(m),y=a.measureFromPx(f),bt()?(qt=p.subtract(y),Kt=g.subtract(h)):(qt=g.subtract(h),Kt=p.subtract(y)),b.insertBefore(d,w),b.removeChild(w)}function vt(e,t,r){e.ensureTracksExist(t,r)}function kt(e,t,r,n){var a,i,s=e.tracks.length,o=e.implicitTracks;for(a=0;s>a;a+=1)if(e.tracks[a].number===r)e.tracks[a].items.push(t);else if(e.tracks[a].number>r)break;for(i=0;o>i;i+=1)r>=e.implicitTracks[i].firstNumber&&n<=e.implicitTracks[i].length&&e.implicitTracks[i].items.push(t)}function Et(){Zt=ht.map(function(e){var t,r,n,a,i,s,o,u,l,d,m,f,g,p;return t=parseInt(e.details.properties[b],10),isNaN(t)&&(er=!0,t=1),r=parseInt(e.details.properties[T],10),isNaN(r)&&(er=!0,r=1),n=parseInt(e.details.properties[v],10),isNaN(n)&&(er=!0,n=1),a=parseInt(e.details.properties[k],10),isNaN(a)&&(er=!0,a=1),i=e.details.properties[R]||c,0===i.length&&(er=!0),s=at(i),o=e.details.properties[E]||c,0===o.length&&(er=!0),u=at(o),l=ut(e.element,Y),d=ot(),d.itemElement=e.element,d.styles=e.details,d.column=t,d.columnSpan=r,d.columnAlign=s,d.row=n,d.rowSpan=a,d.rowAlign=u,m=d.column,f=m+d.columnSpan-1,g=d.row,p=g+d.rowSpan-1,vt(_t,m,f),vt($t,g,p),kt(_t,d,m,f),kt($t,d,g,p),d})}function Rt(){Zt.forEach(function(e){null===e.position&&(e.position=nt(ut(e.itemElement,K)))})}function St(e,t){var r=!1;return((e===$.tb||e===$.bt)&&t===!0||(e===$.lr||e===$.rl)&&t===!1)&&(r=!0),r}function xt(e,t){var r,n,i=pt.cloneNode(!0),s="margin:0px;border:0px;padding:0px;"+(t?R:E)+U+Z+j+(t?b:v)+U+e+j;return i.style.cssText=s,i=Yt.appendChild(i),r=rt(ut(Yt,l)),n=St(r,t)?a.measureFromStyleProperty(i,L):a.measureFromStyleProperty(i,W),Yt.removeChild(i),n}function Nt(e){for(var t=a.zero(),r=e.getIterator(),n=r.next();null!==n;)t=t.add(n.measure),n=r.next();return t}function Ct(e,t){var r=e.maxMeasure.subtract(e.measure),n=t.maxMeasure.subtract(t.measure);return r.getRawMeasure()<n.getRawMeasure()?-1:r.getRawMeasure()>n.getRawMeasure()?1:0}function Pt(e){return e.sizingType===et.valueAndUnit&&e.size.unit===B}function It(e,t,r){var n,i=e.getTracks(t,t+r-1);return n=i.reduce(function(e,t){return e.add(t.measure)},a.zero())}function Ot(e){if(!Pt(e))throw new Error("getNormalFractionMeasure called for non-fraction sized track");var t=e.size.value;return 0===t?a.zero():e.measure.divide(t)}function zt(e,t){var r=0,n=Ot(e),a=Ot(t);return ct(e)&&ct(t)&&(n.getRawMeasure()<a.getRawMeasure()?r=-1:n.getRawMeasure()>a.getRawMeasure()?r=1:e.size.value>t.size.value?r=-1:e.size.value<t.size.value&&(r=1)),r}function Ft(e){var t=a.zero();return e.forEach(function(e){var r=e.size.value,n=e.maxMeasure.divide(r);n.getRawMeasure()>t.getRawMeasure()&&(t=n)}),t}function At(e){function t(t){null===t.usedWidthMeasure&&(t.usedWidthMeasure=It(e,t.column,t.columnSpan))}for(var r=e.getIterator(),n=r.next();null!==n;)n.items.forEach(t),n=r.next()}function Lt(e){var t,r,n,i,s,o,l,c,d,m,f,g,h,y,w,M,b,T,v,k,E,R,S,x,N,C,P,I=e.toLowerCase()===L,O=I?_t:$t,z=I?qt:Kt,F=I?Jt:Qt,A=[],W=[],H=[],D=!0,U=O.getIterator(),j=U.next();for(F&&0===z.getRawMeasure()&&(D=!1);null!==j;){if(j.sizingType!==et.keyword&&j.sizingType!==et.valueAndUnit)throw new Error("Unknown grid track sizing type");if(j.measure=a.zero(),j.minMeasure=a.zero(),j.maxMeasure=a.zero(),r=F&&Pt(j),j.sizingType===et.keyword||r){if(t=j.size,t!==it.fitContent&&t!==it.minContent&&t!==it.maxContent&&t!==it.auto&&!r)throw new Error("Unknown grid track sizing value "+t.keyword);for(r||(j.contentSizedTrack=!0),n=0,i=j.items.length;i>n;n+=1)s=j.items[n],(s.position===J[p]||s.position===J.relative)&&((I?s.columnSpan:s.rowSpan)>1?(null===s.maxWidthMeasure&&(I?s.maxWidthMeasure=u.calcMaxWidth(s.itemElement):s.maxHeightMeasure=u.calcMaxHeight(s.itemElement,s.usedWidthMeasure)),(t===it.fitContent||t===it.auto)&&A.push(s)):(r||t!==it.minContent&&t!==it.fitContent&&t!==it.auto||(o=I?u.calcMinWidth(s.itemElement):u.calcMinHeight(s.itemElement,s.usedWidthMeasure),o.getRawMeasure()>j.minMeasure.getRawMeasure()&&(j.minMeasure=o)),(r||t===it.maxContent||t===it.auto)&&(l=I?u.calcMaxWidth(s.itemElement):u.calcMaxHeight(s.itemElement,s.usedWidthMeasure),l.getRawMeasure()>j.maxMeasure.getRawMeasure()&&(j.maxMeasure=l))));switch(t){case it.maxContent:c=xt(j.number,I),j.measure=j.minMeasure=j.maxMeasure;break;case it.minContent:c=xt(j.number,I),j.measure=j.maxMeasure=j.minMeasure;break;case it.fitContent:case it.auto:j.measure=j.minMeasure}}j.sizingType!==et.keyword||j.size!==it.auto&&j.size!==it.fitContent||W.push(j),j.sizingType===et.valueAndUnit&&(j.size.unit===G?j.measure=j.minMeasure=j.maxMeasure=a.measureFromPx(j.size.value):j.size.unit===B?(j.measure=a.zero(),H.push(j)):er=!0),j=U.next()}if(M=Nt(O),d=z.subtract(M),d.getRawMeasure()>0)for(P=lt(Ct),W.sort(P),m=0,f=W.length;f>m&&!(d.getRawMeasure()<=0);m+=1)g=d.divide(W.length-m),g=a.min(g,W[m].maxMeasure.subtract(W[m].measure)),W[m].measure=W[m].measure.add(g),d=d.subtract(g);for(n=0,i=A.length;i>n&&d>0;n+=1)if(h=A[n],y=I?h.column:h.row,w=I?h.columnSpan:h.rowSpan,O.spanIsInFractionalTrack(y,w)&&(M=It(O,y,w),b=(I===!0?h.maxWidthMeasure:h.maxHeightMeasure).subtract(M),b.getRawMeasure()>0))throw new Error("Not implemented");if(H.length>0&&(d.getRawMeasure()>0||F)){for(P=lt(zt),H.sort(P),T=0,n=0,i=H.length;i>n;n+=1)T+=H[n].size.value;if(v=null,v=F?Ft(H):d.divide(T),i=H.length,F){if(D){for(k=a.zero(),n=0;i>n;n+=1)k=k.add(v.multiply(H[n].size.value));k.getRawMeasure()>0&&d.getRawMeasure()>0&&k.getRawMeasure()>d.getRawMeasure()&&(v=v.multiply(d.divide(k.getRawMeasure()).getRawMeasure()))}for(n=0;i>n;n+=1)H[n].measure=H[n].measure.add(v.multiply(H[n].size.value))}else if(i>0){for(E=Ot(H[0]),R=0,S=0,n=0;i>n;n+=1){if(E.getRawMeasure()<Ot(H[n]).getRawMeasure()){for(S=R,x=Ot(H[n]).subtract(E),N=0;n>N;N+=1)C=0,S>0&&(C=d.multiply(H[N].size.value).divide(S),C=a.min(C,x.multiply(H[N].size.value)),C=a.min(C,H[N].maxMeasure)),H[N].measure=H[N].measure.add(C),d-=C,S-=H[N].size.value;E=Ot(H[n])}if(R+=H[n].size.value,d.getRawMeasure()<=0)break}for(S=R,n=0;i>n;n+=1)C=0,S>0&&(C=d.multiply(H[n].size.value/S)),H[n].measure=H[n].measure.add(C),d=d.subtract(C),S-=H[n].size.value}}I&&At(O)}function Wt(){var e,t,r,n,a,i=Zt.length,s=null,o=null;for(e=0;i>e;e+=1)t=Zt[e],null===t.shrinkToFitSize&&(r=It(_t,t.column,t.columnSpan),n=It($t,t.row,t.rowSpan),(t.position===J[p]||t.position===J.relative)&&(a=bt(),t.columnAlign===Q.stretch&&(a?o=r:s=r),t.rowAlign===Q.stretch&&(a?s=n:o=n)),t.shrinkToFitSize=null===s||null===o?u.calcShrinkToFitWidthAndHeight(t.itemElement,r,n,s,o):st(),null!==s&&(t.shrinkToFitSize.width=s),null!==o&&(t.shrinkToFitSize.height=o))}function Ht(){var e,t,r=pt.cloneNode(!1),n=A+z+N;document.body.appendChild(r),r.style.width="100px",e=parseInt(r.offsetWidth,10);for(t in tt)tt.hasOwnProperty(t)&&(r.style[n]=t+" solid",tt[t]=parseInt(r.offsetWidth,10)-e);document.body.removeChild(r)}function Gt(e){var t=e.column-1,r=e.row-1,n={top:0,left:0};return n.left=_t.tracks.slice(0,t).reduce(function(e,t){return e+t.measure.getRawMeasure()},0),n.top=$t.tracks.slice(0,r).reduce(function(e,t){return e+t.measure.getRawMeasure()},0),n.left+=G,n.top+=G,n}function Bt(e){var t=e.shrinkToFitSize,r=e.itemElement,n={},i={},s={},o=[x,N,C,P];return t={height:t.height.getRawMeasure(),width:t.width.getRawMeasure()},o.forEach(function(e){n[e]=a.measureFromStyleProperty(r,O+z+e),i[e]=a.measureFromStyleProperty(r,F+z+e),s[e]=a.measureFromStyleProperty(r,A+z+e+z+L)}),t.height-=n.top.getRawMeasure()+n.bottom.getRawMeasure()+i.top.getRawMeasure()+i.bottom.getRawMeasure()+s.top.getRawMeasure()+s.bottom.getRawMeasure(),t.width-=n.left.getRawMeasure()+n.right.getRawMeasure()+i.left.getRawMeasure()+i.right.getRawMeasure()+s.left.getRawMeasure()+s.right.getRawMeasure(),t}function Dt(){var r=c,a=c,i=0,s=0,o=$t.tracks,u=_t.tracks;Zt.forEach(function(e){var t,n,a,i=e.styles,s=e.itemElement.className,o=dt();t=new RegExp(y+"-\\d*\\s?","g"),e.itemElement.className=s.replace(t,""),mt(e.itemElement,o),n=Gt(e),a=Bt(e),r+=i.selector+h+o+d+K+U+m+j,r+=x+U+n.top+j,r+=P+U+n.left+j,r+=L+U+a.width+G+j,r+=W+U+a.height+G+j,r+=f,e.itemElement.style.position=null}),ut(Yt,K)===p&&(a+=K+U+g+j),i=o.reduce(function(e,t){return e+t.measure.getRawMeasure()},0),a+=W+U+i+G+j,s=u.reduce(function(e,t){return e+t.measure.getRawMeasure()},0),a+=L+U+s+G+j,r+=t+d+a+f,ft(r,n,e.id)}function Ut(){gt(n,e.id)}function jt(){var e=r[w]||S,t=r[M]||S;Tt(),s.parseGridTracksString(e,_t),s.parseGridTracksString(t,$t),Et(),Rt(),Lt(L),Lt(W),Wt(),Ht()}function Vt(e){var t=e?_t:$t,r=St(Xt,e),n=r?"Width":"Height";Zt.forEach(function(i){var s,u,l,d,m,f,g,p,h,y=i.itemElement;if((e?i.verified.columnBreadth:i.verified.rowBreadth)!==!0){if(s=e?i.column:i.row,u=e?i.columnAlign:i.rowAlign,l=o["calcMarginBox"+n](y),d=c,i.itemElement.id.length>0&&(d="[ID = "+i.itemElement.id+"] "),m=i.itemElement["offset"+n],f=a.measureFromPx(m),l.getMeasureRoundedToWholePixel().equals(f)!==!0&&(er=!0),i.position===J.absolute){if(null===i.shrinkToFitSize)throw new Error("Current item's shrink to fit size has not been calculated");g=r?i.shrinkToFitSize.width:i.shrinkToFitSize.height}else switch(u){case Q.stretch:p=e?i.column:i.row,h=e?i.columnSpan:i.rowSpan,g=It(t,p,h);break;case Q.start:case Q.end:case Q.center:if(null===i.shrinkToFitSize)throw new Error("Current item's shrink to fit size has not been calculated");g=r?i.shrinkToFitSize.width:i.shrinkToFitSize.height;break;default:throw new Error("Unknown grid align type "+u.keyword)}g.equals(l)!==!0&&0===_&&1!==Math.abs(g.subtract(l).getRawMeasure())&&(er=!0),e?i.verified.columnBreadth=!0:i.verified.rowBreadth=!0}})}var Yt=e,Xt=rt(ut(e,l)),qt=null,Kt=null,Zt=null,_t=i(),$t=i(),Jt=!1,Qt=!1,er=!1;return Ut(),jt(),Dt(),{verifyGridItemLengths:Vt}}}),define("scalejs.layout-cssgrid/cssGridLayout",["scalejs!core","./utils.sheetLoader","./gridLayout"],function(e,t,r){function n(t){return e.array.addOne(d,t),function(){e.array.removeOne(d,t)}}function a(e,t){d.forEach(function(r){r(e,t)})}function i(){l.forEach(function(e){var t,n,i,s=e.selector,o=e.properties;t=document.getElementById(e.selector.substring(1)),null!==t&&(i=t.getAttribute("style"),null!==i&&i.split("; ").forEach(function(e){var t,r=e.split(":");2===r.length&&(e=r[0].trim(),t=r[1].trim(),0===e.indexOf("-ms-grid")&&(o[e.substring(4)]=t))}),Object.keys(o).forEach(function(e){t.setAttribute("data-ms-"+e,o[e])}),n=u.filter(function(t){return t!==e}).map(function(e){var r,n,a={};return n=document.getElementById(e.selector.substring(1)),null!==n&&n.parentNode===t?(a.element=n,a.details=e,r=a.element.getAttribute("style"),null!==r&&r.split(";").forEach(function(e){var t,r=e.split(":");2===r.length&&(e=r[0].trim(),t=r[1].trim(),0===e.indexOf("-ms-grid")&&(a.details.properties[e.substring(4)]=t))}),Object.keys(a.details.properties).forEach(function(e){a.element.setAttribute("data-ms-"+e,a.details.properties[e])}),a):void 0}).filter(function(e){return e}),r(t,s,o,"screen",n),a(t,s))})}function s(){clearTimeout(c),c=setTimeout(i,100)}function o(){t.loadAllStyleSheets(function(e){u=Object.keys(e).reduce(function(t,r){var n=e[r];return t.concat(n.rulelist)},[]).filter(function(e){var t=e.declarations;return"style"===e.type&&t?Object.keys(t).some(function(e){return 0===e.indexOf("-ms-grid")}):!1}).map(function(e){var t={};return t.selector=e.selector,t.media="screen",t.properties={},Object.keys(e.declarations).forEach(function(r){var n=e.declarations[r];0===r.indexOf("-ms-grid")?t.properties[r.substring(4)]=n:"display"===r&&"-ms-grid"===n?t.properties.display="grid":t.properties[r]=n}),t}),l=u.filter(function(e){return"grid"===e.properties.display}),s(),window.addEventListener("resize",function(){s()})})}var u,l,c,d=[];return{polyfill:o,layout:s,onLayoutDone:n}}),define("scalejs.layout-cssgrid",["scalejs!core","CSS.supports","./scalejs.layout-cssgrid/cssGridLayout","scalejs.reactive"],function(e,t,r){t.supports("display","-ms-grid")||r.polyfill(),e.registerExtension({layout:{cssGrid:r}})
});